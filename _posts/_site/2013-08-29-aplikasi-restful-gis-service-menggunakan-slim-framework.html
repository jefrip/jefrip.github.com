---
layout: post
title: Aplikasi RESTful (GIS Service) menggunakan Slim Framework
date: 2013-08-29 07:42:05.000000000 +07:00
categories:
- PHP
- Programming
tags:
- GIS Service
- REST
- Slim Framework
status: publish
type: post
published: true
meta:
  _edit_last: '863'
  _syntaxhighlighter_encoded: '1'
  dsq_thread_id: '1663848595'
author:
  login: jefri.p
  email: jefri.p@ui.edu
  display_name: Jefri Pakpahan
  first_name: Jefri
  last_name: Pakpahan
excerpt: !ruby/object:Hpricot::Doc
  options: {}
---
<p><a href="https://staff.blog.ui.ac.id/jefri.p/files/2013/08/slim.png"><img src="assets/slim.png" alt="slim" width="134" height="71" class="aligncenter size-full" /></a><br />
Beberapa waktu lalu seorang teman (Edwin) membuatkan webservice (SOAP) dengan menggunakan java (http://210.247.242.106/GISService/Service?wsdl) tentang database provinsi, kecamatan dan desa di Indonesia yang didapatkan dari Panji09 pada thread di <a href="http://www.kaskus.co.id/thread/518298ae8227cf927f000003/sharedatabase-wilayah-indonesia">kaskus</a>.<br />
Kali ini saya mencoba untuk membuat webservice (REST) sederhana dengan menggunakan Slim Framework.<br />
<!--more--></p>
<h1><strong>Apa itu REST?</strong></h1>
<p><a href="http://en.wikipedia.org/wiki/Representational_state_transfer" title="REST" target="_blank">REST adalah Representational State Transfer</a>.<br />
- REST menggunakan protokol HTTP (Create, Read, Update, Delete) dengan metode POST, GET, PUT, DELETE.<br />
- REST alternatif dari RPC atau webservice SOAP, WSDL dll.<br />
- REST sebenarnya bukanlah sebuah standar, hanya sebuah Architectural style bukan seperti SOAP menggunakan protokol.</p>
<h1><strong>Kenapa Slim Framework?</strong></h1>
<p>- Karena mirip dengan <a href="http://www.sinatrarb.com" title="Sinatra" target="_blank">Sinatra</a> (Ruby).<br />
- Slim menggunakan PHP &gt;= 5.3.0.<br />
- Ukurannya relatif kecil.<br />
- Mudah dipelajari.</p>
<h1><strong>Fitur</strong></h1>
<blockquote><p>
    Powerful router<br />
        Standard and custom HTTP methods<br />
        Route parameters with wildcards and conditions<br />
        Route redirect, halt, and pass<br />
        Route middleware<br />
    Template rendering with custom views<br />
    Flash messages<br />
    Secure cookies with AES-256 encryption<br />
    HTTP caching<br />
    Logging with custom log writers<br />
    Error handling and debugging<br />
    Middleware and hook architecture<br />
    Simple configuration
</p></blockquote>
<p>Contoh penggunaan slim dengan koneksi ke database lewat PDO :<br />
[php]<br />
&lt;?php<br />
require 'Slim/Slim.php';<br />
require 'db.php';</p>
<p>\Slim\Slim::registerAutoloader();</p>
<p>$app = new \Slim\Slim(array(<br />
    'mode' =&gt; 'production',<br />
	'log.writer' =&gt; new \Slim\Extras\Log\DateTimeFileWriter(array(<br />
        'path' =&gt; './logs',<br />
        'name_format' =&gt; 'Y-m-d',<br />
        'message_format' =&gt; '%label% - %date% - %message%'<br />
		))<br />
));</p>
<p>$app-&gt;contentType(&quot;application/json&quot;);</p>
<p>$app-&gt;get('/getProvinsis', 'getProvinsis');<br />
$app-&gt;get('/getKabupatens/:id', 'getKabupatens');<br />
$app-&gt;get('/getKecamatans/:id', 'getKecamatans');<br />
$app-&gt;get('/getDesas/:id', 'getDesas');</p>
<p>// Only invoked if mode is &quot;production&quot;<br />
$app-&gt;configureMode('production', function () use ($app) {<br />
    $app-&gt;config(array(<br />
        'log.enable' =&gt; true,<br />
		'log.level' =&gt; \Slim\Log::WARN,<br />
        'debug' =&gt; false<br />
    ));<br />
});</p>
<p>// Only invoked if mode is &quot;development&quot;<br />
$app-&gt;configureMode('development', function () use ($app) {<br />
    $app-&gt;config(array(<br />
        'log.enable' =&gt; false,<br />
		'log.level' =&gt; \Slim\Log::DEBUG,<br />
        'debug' =&gt; true<br />
    ));<br />
});</p>
<p>$app-&gt;notFound(function () use ($app) {<br />
   echo 'notFound coy';<br />
});</p>
<p>$app-&gt;run();</p>
<p>//All Functions goes here<br />
function getProvinsis()<br />
{<br />
    global $app;</p>
<p>    $sql = &quot;select * FROM provinsi ORDER BY id&quot;;<br />
    try {<br />
        $app-&gt;etag('getProvinsis');<br />
        $db = getConnection();<br />
        $stmt = $db-&gt;query($sql);<br />
        $provinsis = $stmt-&gt;fetchAll(PDO::FETCH_OBJ);<br />
        $db = null;<br />
        echo json_encode($provinsis);<br />
    } catch(\PDOException $e) {<br />
        echo '{&quot;error&quot;:{&quot;text&quot;:'. $e-&gt;getMessage() .'}}';<br />
    }<br />
}</p>
<p>function getKabupatens($id)<br />
{<br />
    $sql = &quot;SELECT * FROM kabupaten WHERE id_prov = :id&quot;;</p>
<p>    try {<br />
        $db = getConnection();<br />
        $stmt = $db-&gt;prepare($sql);<br />
        $stmt-&gt;bindParam(&quot;id&quot;, $id);<br />
        $stmt-&gt;execute();<br />
        $kabupatens = $stmt-&gt;fetchAll();<br />
        $db = null;<br />
        echo json_encode($kabupatens);<br />
    } catch (\PDOException $e) {<br />
        echo '{&quot;error&quot;:{&quot;text&quot;:'. $e-&gt;getMessage() .'}}';<br />
    }<br />
}</p>
<p>function getKecamatans($id)<br />
{<br />
    $sql = &quot;SELECT * FROM kecamatan WHERE id_kabupaten = :id&quot;;</p>
<p>    try {<br />
        $db = getConnection();<br />
        $stmt = $db-&gt;prepare($sql);<br />
        $stmt-&gt;bindParam(&quot;id&quot;, $id);<br />
        $stmt-&gt;execute();<br />
        $kecamatans = $stmt-&gt;fetchAll();<br />
        $db = null;<br />
        echo json_encode($kecamatans);<br />
    } catch (\PDOException $e) {<br />
        echo '{&quot;error&quot;:{&quot;text&quot;:'. $e-&gt;getMessage() .'}}';<br />
    }<br />
}</p>
<p>function getDesas($id)<br />
{<br />
    $sql = &quot;SELECT * FROM desa WHERE id_kecamatan = :id&quot;;</p>
<p>    try {<br />
        $db = getConnection();<br />
        $stmt = $db-&gt;prepare($sql);<br />
        $stmt-&gt;bindParam(&quot;id&quot;, $id);<br />
        $stmt-&gt;execute();<br />
        $desas = $stmt-&gt;fetchAll();<br />
        $db = null;<br />
        echo json_encode($desas);<br />
    } catch (\PDOException $e) {<br />
        echo '{&quot;error&quot;:{&quot;text&quot;:'. $e-&gt;getMessage() .'}}';<br />
    }<br />
}<br />
[/php]</p>
<h2>Download </h2>
<p>Anda dapat mendownload source code di <a href="https://github.com/jefrip/GISService">https://github.com/jefrip/GISService</a></p>
<p>Referensi :<br />
- <a href="https://github.com/edwinkun/GISService">https://github.com/edwinkun/GISService</a><br />
- <a href="http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/">http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/</a></p>
